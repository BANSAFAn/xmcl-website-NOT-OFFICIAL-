
import type { Translations, SupportedLocale, LanguageConfig } from '@/types/i18n';
import { navigationTranslations } from './modules/navigation';
import { commonTranslations } from './modules/common';
import { homeTranslations } from './modules/home';
import { downloadTranslations, downloadMessagesTranslations } from './modules/downloads';
import { footerTranslations } from './modules/footer';
import { statsTranslations } from './modules/stats';
import { issuesTranslations } from './modules/issues';
import { blogTranslations } from './modules/blog';
import { guideTranslations } from './modules/guide';
import { changelogTranslations } from './modules/changelog';
import { testingTranslations } from './modules/testing';
import { themeTranslations, osSwitchTranslations } from './modules/theme';
import { uiTranslations } from './modules/ui';
import { docsTranslations } from './modules/docs';

// Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ JSON-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¾Ğ²
import enJson from './json/en.json';
import ruJson from './json/ru.json';
import jaJson from './json/ja.json';
import arJson from './json/ar.json';
import deJson from './json/de.json';
import zhHantJson from './json/zh-Hant.json';

// Language configurations
export const languageConfigs: LanguageConfig[] = [
  { code: 'ru', name: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', flag: 'ğŸ‡·ğŸ‡º', color: 'from-blue-500 to-red-500' },
  { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸', color: 'from-blue-500 to-red-500' },
  { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ', color: 'from-white to-red-500' },
  { code: 'uk', name: 'Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°', flag: 'ğŸ‡ºğŸ‡¦', color: 'from-blue-500 to-yellow-400' },
  { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³', color: 'from-red-600 to-yellow-400' },
  { code: 'ar', name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦', color: 'from-green-500 to-white' },
  { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª', color: 'from-black to-yellow-500 via-red-500' },
  { code: 'zh-Hant', name: 'ä¸­æ–‡ï¼ˆç¹é«”ï¼‰', flag: 'ğŸ‡¹ğŸ‡¼', color: 'from-blue-500 to-red-500' }
] as const;

// Build complete translations by merging all modular translations
function buildTranslations(): Record<SupportedLocale, Translations> {
  const translations: Record<SupportedLocale, Translations> = {} as Record<SupportedLocale, Translations>;

  for (const locale of ['en', 'ru', 'ja', 'zh', 'uk', 'ar', 'de', 'zh-Hant'] as SupportedLocale[]) {
    // Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹ Ğ¸Ğ· JSON-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
    let baseTranslations = {};
    
    if (locale === 'en') baseTranslations = enJson;
    else if (locale === 'ru') baseTranslations = ruJson;
    else if (locale === 'ja') baseTranslations = jaJson;
    else if (locale === 'ar') baseTranslations = arJson;
    else if (locale === 'de') baseTranslations = deJson;
    else if (locale === 'zh-Hant') baseTranslations = zhHantJson;

    translations[locale] = {
      // ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµĞ¼ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹ Ğ¸Ğ· JSON
      ...baseTranslations,
      
      // ĞœĞ¾Ğ´ÑƒĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹
      nav: navigationTranslations[locale],
      common: commonTranslations[locale],
      home: homeTranslations[locale],
      downloadSection: downloadTranslations[locale],
      downloadMessages: downloadMessagesTranslations[locale],
      footer: footerTranslations[locale],
      stats: statsTranslations[locale],
      issues: issuesTranslations[locale],
      blog: blogTranslations[locale],
      guide: guideTranslations[locale],
      changelog: changelogTranslations[locale],
      testing: testingTranslations[locale],
      theme: themeTranslations[locale],
      osSwitch: osSwitchTranslations[locale],
      ui: uiTranslations[locale],
      docs: docsTranslations[locale],

      // Basic app information based on locale
      downloadXMCL: getDownloadXMCLText(locale),
      modernCrossplatformDescription: getModernDescText(locale),
      githubStars: getGitHubStarsText(locale),
      forks: getForksText(locale),
      lastVersion: getLastVersionText(locale)
    };
  }

  return translations;
}

function getDownloadXMCLText(locale: SupportedLocale): string {
  const texts = {
    en: "Download XMCL",
    ru: "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ XMCL",
    ja: "XMCLã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    zh: "ä¸‹è½½XMCL",
    uk: "Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶Ğ¸Ñ‚Ğ¸ XMCL",
    ar: "ØªØ­Ù…ÙŠÙ„ XMCL",
    de: "XMCL herunterladen",
    'zh-Hant': "ä¸‹è¼‰XMCL"
  };
  return texts[locale];
}

function getModernDescText(locale: SupportedLocale): string {
  const texts = {
    en: "Modern cross-platform Minecraft launcher",
    ru: "Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ ĞºÑ€Ğ¾ÑÑĞ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ»Ğ°ÑƒĞ½Ñ‡ĞµÑ€ Minecraft",
    ja: "ãƒ¢ãƒ€ãƒ³ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ Minecraftãƒ©ãƒ³ãƒãƒ£ãƒ¼",
    zh: "ç°ä»£è·¨å¹³å°Minecraftå¯åŠ¨å™¨",
    uk: "Ğ¡ÑƒÑ‡Ğ°ÑĞ½Ğ¸Ğ¹ ĞºÑ€Ğ¾ÑĞ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ğ¸Ğ¹ Ğ»Ğ°ÑƒĞ½Ñ‡ĞµÑ€ Minecraft",
    ar: "Ù…Ø´ØºÙ„ Ù…Ø§ÙŠÙ† ÙƒØ±Ø§ÙØª Ø­Ø¯ÙŠØ« Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØµØ§Øª",
    de: "Moderner plattformÃ¼bergreifender Minecraft-Launcher",
    'zh-Hant': "ç¾ä»£è·¨å¹³å°Minecraftå•Ÿå‹•å™¨"
  };
  return texts[locale];
}

function getGitHubStarsText(locale: SupportedLocale): string {
  const texts = {
    en: "GitHub Stars",
    ru: "Ğ—Ğ²Ñ‘Ğ·Ğ´Ñ‹ GitHub",
    ja: "GitHubã‚¹ã‚¿ãƒ¼",
    zh: "GitHubæ˜Ÿæ ‡",
    uk: "Ğ—Ñ–Ñ€ĞºĞ¸ GitHub",
    ar: "Ù†Ø¬ÙˆÙ… GitHub",
    de: "GitHub Sterne",
    'zh-Hant': "GitHubæ˜Ÿæ¨™"
  };
  return texts[locale];
}

function getForksText(locale: SupportedLocale): string {
  const texts = {
    en: "Forks",
    ru: "Ğ¤Ğ¾Ñ€ĞºĞ¸",
    ja: "ãƒ•ã‚©ãƒ¼ã‚¯",
    zh: "åˆ†æ”¯",
    uk: "Ğ¤Ğ¾Ñ€ĞºĞ¸",
    ar: "ØªÙØ±ÙŠØ¹Ø§Øª",
    de: "Forks",
    'zh-Hant': "åˆ†æ”¯"
  };
  return texts[locale];
}

function getLastVersionText(locale: SupportedLocale): string {
  const texts = {
    en: "Latest Version",
    ru: "ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ²ĞµÑ€ÑĞ¸Ñ",
    ja: "æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³",
    zh: "æœ€æ–°ç‰ˆæœ¬",
    uk: "ĞÑÑ‚Ğ°Ğ½Ğ½Ñ Ğ²ĞµÑ€ÑÑ–Ñ",
    ar: "Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø±",
    de: "Neueste Version",
    'zh-Hant': "æœ€æ–°ç‰ˆæœ¬"
  };
  return texts[locale];
}

export const translations = buildTranslations();

// Helper function to get translation with fallback
export function getTranslation(
  locale: SupportedLocale,
  key: string,
  fallback: string = key
): string {
  const keys = key.split('.');
  let value: any = translations[locale];
  
  for (const k of keys) {
    if (value && typeof value === 'object' && k in value) {
      value = value[k];
    } else {
      return fallback;
    }
  }
  
  return typeof value === 'string' ? value : fallback;
}

// Helper to check if locale is supported
export function isSupportedLocale(locale: string): locale is SupportedLocale {
  return ['en', 'ru', 'ja', 'zh', 'uk', 'ar', 'de', 'zh-Hant'].includes(locale);
}

// Default locale
export const DEFAULT_LOCALE: SupportedLocale = 'en';
